// Package res
// @Link  https://github.com/huagelong/devinggo
// @Copyright  Copyright (c) 2024 devinggo
// @Author  Kai <hpuwang@gmail.com>
// @License  https://github.com/huagelong/devinggo/blob/master/LICENSE

package res

import (
{% if or (hasField .columns "created_by") (hasField .columns "updated_by")  %}
"devinggo/modules/system/model"
{%end %}
{%if .hasGtime %}
"github.com/gogf/gf/v2/os/gtime"
{% end %}
)

type {% .tableCaseCamelName %} struct {
{% range $index, $elem := .columns %}
 {% caseCamel $elem.ColumnName %}  {% getModelColumnType $elem.ColumnType %} `json:"{% $elem.ColumnName %}"  description:"{% cleanStr $elem.ColumnComment %}" `
{% if eq $elem.ColumnName "created_by" %}
CreatedByRelate model.UserRelate `json:"created_by_related"  description:"创建人关联信息" `
{%end %}
{% if eq $elem.ColumnName "updated_by" %}
UpdatedByRelate model.UserRelate `json:"updated_by_related"  description:"更新人关联信息" `
{%end %}
{%end %}

}

{% if eq .table.Type "tree"  %}
type {% .tableCaseCamelName %}Tree struct {
 {% .tableCaseCamelName %}
 Children []*{% .tableCaseCamelName %}Tree `json:"children" description:"子菜单"`
}

type {% .tableCaseCamelName %}SelectTree struct {
  Id       {% getModelColumnTypeFromColumName .columns "id" %}            `json:"id"`
  ParentId {% getModelColumnTypeFromColumName .columns "parent_id"  %}            `json:"parent_id"`
  Value    {% getModelColumnTypeFromColumName .columns "id"  %}            `json:"value"`
  Label    string            `json:"label"`
  Children []*{% .tableCaseCamelName %}SelectTree `json:"children"`
}
{%end %}

type {% .tableCaseCamelName %}Excel struct {
{% range $index, $elem := .columns %}
{%if eq $elem.IsInsert 2 %}
    {% caseCamel $elem.ColumnName %}  {% parseColumnType $elem %} `json:"{% $elem.ColumnName %}" {%if eq $elem.IsRequired 2 %} v:"required" {%end %} description:"{% cleanStr $elem.ColumnComment %}" {% if or (contains $.generateMenus "export")  (contains $.generateMenus "import") %} excelName:"{% $elem.ColumnComment %}" excelIndex:"{% $index %}" {%end %} `
{%end %}
{% end %}
}
